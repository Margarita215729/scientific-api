openapi: 3.1.0
info:
  title: Scientific Assistant API
  version: 3.0.0
  description: >
    API-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –∫–∞—Å—Ç–æ–º–Ω–æ–≥–æ GPT, –æ–±–µ—Å–ø–µ—á–∏–≤–∞—é—â–∏–π –¥–æ—Å—Ç—É–ø –∫ Google Drive,
    —á—Ç–µ–Ω–∏–µ, –∞–Ω–∞–ª–∏–∑ –∏ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–∞—É—á–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö –≤ —Ñ–æ—Ä–º–∞—Ç–µ CSV, JSON, PDF, IPYNB –∏ –¥—Ä.

servers:
  - url: https://scientific-api.vercel.app

paths:
  /drive/universe/tree:
    get:
      operationId: getUniverseDriveTree
      summary: –ü–æ–ª—É—á–∏—Ç—å –∞–∫—Ç—É–∞–ª—å–Ω—É—é —Å—Ç—Ä—É–∫—Ç—É—Ä—É –ø–∞–ø–∫–∏ Universe
      parameters:
        - name: max_depth
          in: query
          required: false
          schema:
            type: integer
            default: 5
      responses:
        '200':
          description: –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø–∞–ø–∫–∏ Universe
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/FileNode'

  /drive/universe/tree/static:
    get:
      operationId: getCachedUniverseTree
      summary: –ü–æ–ª—É—á–∏—Ç—å –∫–µ—à–∏—Ä–æ–≤–∞–Ω–Ω—É—é —Å—Ç—Ä—É–∫—Ç—É—Ä—É –ø–∞–ø–∫–∏ Universe
      responses:
        '200':
          description: –°—Ç–∞—Ç–∏—á–Ω–∞—è –∏–µ—Ä–∞—Ä—Ö–∏—è —Ñ–∞–π–ª–æ–≤ –∏ –ø–∞–ø–æ–∫
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/FileNode'

  /drive/file:
    get:
      operationId: downloadDriveFile
      summary: –°–∫–∞—á–∞—Ç—å —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ —Ñ–∞–π–ª–∞ –ø–æ ID
      parameters:
        - name: file_id
          in: query
          required: true
          schema:
            type: string
      responses:
        '200':
          description: –°–æ–¥–µ—Ä–∂–∏–º–æ–µ —Ñ–∞–π–ª–∞
          content:
            application/json:
              schema:
                type: object
                properties:
                  content:
                    type: string

  /drive/upload:
    post:
      operationId: uploadToDrive
      summary: –ó–∞–≥—Ä—É–∑–∏—Ç—å –Ω–æ–≤—ã–π —Ñ–∞–π–ª
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                filename:
                  type: string
                mime_type:
                  type: string
                  default: text/plain
                content:
                  type: string
                parent_id:
                  type: string
      responses:
        '200':
          description: –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –∑–∞–≥—Ä—É–∂–µ–Ω–Ω–æ–º —Ñ–∞–π–ª–µ
          content:
            application/json:
              schema:
                type: object
                properties:
                  id:
                    type: string
                  name:
                    type: string
                  mimeType:
                    type: string

  /drive/file/edit:
    post:
      operationId: editDriveFile
      summary: –ò–∑–º–µ–Ω–∏—Ç—å —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–≥–æ —Ñ–∞–π–ª–∞
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                file_id:
                  type: string
                new_content:
                  type: string
                mime_type:
                  type: string
                  default: text/plain
      responses:
        '200':
          description: –§–∞–π–ª –æ–±–Ω–æ–≤–ª—ë–Ω
          content:
            application/json:
              schema:
                type: object
                properties:
                  status:
                    type: string
                  file_id:
                    type: string

components:
  schemas:
    FileNode:
      type: object
      properties:
        id:
          type: string
        name:
          type: string
        type:
          type: string
        children:
          type: array
          items:
            $ref: '#/components/schemas/FileNode'

x-openai:
  prompt-suggestions:
    - name: "üìÅ –ë—ã—Å—Ç—Ä–æ–µ –¥–µ—Ä–µ–≤–æ Universe"
      request: "–ü–æ–∫–∞–∂–∏ —Å—Ç—Ä—É–∫—Ç—É—Ä—É –ø–∞–ø–∫–∏ Universe"
      action: getCachedUniverseTree
    - name: "üìñ –ü—Ä–æ—á–∏—Ç–∞—Ç—å —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ —Ñ–∞–π–ª–∞"
      request: "–°—á–∏—Ç–∞–π —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ —Ñ–∞–π–ª–∞ —Å ID {file_id}"
      action: downloadDriveFile
    - name: "‚úçÔ∏è –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å —Ñ–∞–π–ª"
      request: "–ò–∑–º–µ–Ω–∏ —Ñ–∞–π–ª —Å ID {file_id}, –¥–æ–±–∞–≤–∏–≤ —Ç–µ–∫—Å—Ç..."
      action: editDriveFile
    - name: "üì§ –°–æ—Ö—Ä–∞–Ω–∏—Ç—å –Ω–æ–≤—ã–π —Ñ–∞–π–ª"
      request: "–°–æ–∑–¥–∞–π –Ω–æ–≤—ã–π —Ñ–∞–π–ª —Å –∏–º–µ–Ω–µ–º {–∏–º—è} –∏ —Å–æ–¥–µ—Ä–∂–∏–º—ã–º..."
      action: uploadToDrive
