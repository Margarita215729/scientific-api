# ГЛАВА 3. ЭКСПЕРИМЕНТАЛЬНОЕ ИССЛЕДОВАНИЕ И РЕЗУЛЬТАТЫ КЛАССИФИКАЦИИ ГРАФОВ

## 3.1. Общая структура программного комплекса

### 3.1.1. Архитектура проекта

Программный комплекс **scientific-api** организован по принципу модульной архитектуры с чётким разделением ответственности между компонентами:

```
scientific-api/
├── api/                    # FastAPI роутеры и HTTP-эндпоинты
│   ├── index.py           # Главная точка входа приложения
│   ├── heavy_api.py       # Ресурсоёмкие операции обработки данных
│   ├── data_cleaning.py   # API очистки и анализа качества данных
│   ├── ml_models.py       # API машинного обучения
│   └── research_api.py    # API исследовательских операций
│
├── scientific_api/         # Основной пакет бизнес-логики
│   ├── data_sources/      # Коннекторы к внешним источникам
│   │   ├── desi_connector.py   # DESI DR1
│   │   └── sdss_connector.py   # VizieR/SDSS
│   ├── pipeline/          # Модули обработки пайплайна
│   │   ├── features.py    # Извлечение признаков графов
│   │   ├── train.py       # Обучение ML-моделей
│   │   └── graph_dataset.py  # Работа с датасетами графов
│   └── ml/                # Машинное обучение
│       ├── models/        # Модели классификации
│       └── metrics/       # Метрики качества
│
├── database/              # Слой работы с базой данных
│   ├── config.py          # Конфигурация подключений
│   └── schema.sql         # Схема БД
│
├── ui/                    # Веб-интерфейс (Dashboard)
│   ├── dashboard.html     # Главная страница
│   ├── dashboard.js       # Логика интерфейса
│   └── style.css          # Стили
│
├── notebooks/             # Jupyter ноутбуки экспериментов
├── data/                  # Хранилище данных
├── outputs/               # Результаты пайплайна
├── configs/               # Конфигурационные файлы
└── tests/                 # Автоматические тесты
```

### 3.1.2. Технологический стек

| Уровень | Технологии |
|---------|------------|
| Backend API | FastAPI 0.104, Uvicorn, Pydantic |
| Данные | Pandas 2.2, PyArrow, Parquet |
| Графы | NetworkX 3.2, SciPy |
| ML | Scikit-learn 1.4, NumPy 1.26 |
| Астрономия | Astroquery 0.4, Astropy |
| База данных | MongoDB 7.0, SQLite (fallback) |
| Кэширование | Redis 7 |
| Контейнеризация | Docker, docker-compose |
| CI/CD | GitHub Actions, Azure Container Instances |

## 3.2. Реализация сервера и API

### 3.2.1. Инициализация FastAPI приложения

Приложение инициализируется в модуле `api/index.py` с подключением всех роутеров:

```python
from fastapi import FastAPI
from fastapi.middleware.cors import CORSMiddleware

app = FastAPI(
    title="Scientific Data API",
    description="API для анализа космологических и квантовых графов",
    version="1.0.0"
)

# CORS для кросс-доменных запросов
app.add_middleware(
    CORSMiddleware,
    allow_origins=["*"],
    allow_credentials=True,
    allow_methods=["*"],
    allow_headers=["*"],
)

# Подключение роутеров
from api.heavy_api import router as heavy_router
from api.data_cleaning import router as cleaning_router
from api.ml_models import router as ml_router
from api.research_api import router as research_router

app.include_router(heavy_router)
app.include_router(cleaning_router)
app.include_router(ml_router, prefix="/api/ml")
app.include_router(research_router, prefix="/api/research")
```

### 3.2.2. Структура эндпоинтов API

Система предоставляет следующие группы эндпоинтов:

| Группа | Префикс | Назначение |
|--------|---------|------------|
| Базовые | `/ping`, `/status`, `/api` | Проверка состояния системы |
| Астро | `/astro/*` | Загрузка каталогов SDSS, DESI |
| Очистка | `/api/cleaning/*` | Анализ и очистка данных |
| ML | `/api/ml/*` | Обучение и применение моделей |
| Исследования | `/api/research/*` | Эксперименты и визуализация |

### 3.2.3. Pydantic-модели запросов и ответов

Для типизации API используются Pydantic-модели:

```python
from pydantic import BaseModel
from typing import Optional, Dict, Any, List

class MLRequest(BaseModel):
    """Запрос на обучение модели."""
    data_source: str  # "database" или "file"
    target_column: str
    model_type: str = "classification"  # classification / regression
    algorithm: str = "random_forest"
    test_size: float = 0.2
    max_samples: int = 10000

class MLResultResponse(BaseModel):
    """Результат обучения модели."""
    accuracy: Optional[float] = None
    f1_score: Optional[float] = None
    roc_auc: Optional[float] = None
    best_params: Dict[str, Any]
    feature_importance: Optional[Dict[str, float]] = None
    model_path: Optional[str] = None
```

### 3.2.4. Пример эндпоинта классификации

```python
@router.get("/api/ml/models")
async def list_available_models():
    """Получение списка доступных ML-моделей."""
    return {
        "classification": [
            {"id": "logistic_regression", "name": "Logistic Regression"},
            {"id": "random_forest", "name": "Random Forest Classifier"},
            {"id": "svm", "name": "Support Vector Machine"}
        ],
        "regression": [
            {"id": "linear_regression", "name": "Linear Regression"},
            {"id": "random_forest_regressor", "name": "Random Forest Regressor"}
        ]
    }
```

## 3.3. Модуль импорта и интеграции с астрономическими каталогами

### 3.3.1. Архитектура коннекторов

Система поддерживает два основных источника космологических данных:

1. **VizieR V/154 (SDSS DR16)** — через библиотеку astroquery;
2. **DESI DR1** — через SPARCL API и прямое скачивание FITS.

### 3.3.2. Загрузка данных VizieR/SDSS

```python
from astroquery.vizier import Vizier
from astropy.coordinates import SkyCoord
import astropy.units as u

def load_vizier_data(ra_center: float, dec_center: float, 
                     radius_deg: float = 0.5, max_rows: int = 5000) -> pd.DataFrame:
    """Конусный поиск в VizieR V/154 (SDSS DR16)."""
    Vizier.TIMEOUT = 120
    v = Vizier(
        columns=["objID", "RA_ICRS", "DE_ICRS", "class", "zsp", 
                 "umag", "gmag", "rmag", "imag", "zmag"],
        row_limit=max_rows
    )
    coord = SkyCoord(ra=ra_center, dec=dec_center, unit="deg")
    result = v.query_region(coord, radius=radius_deg*u.deg, catalog="V/154")
    
    if result:
        return result[0].to_pandas()
    return pd.DataFrame()
```

### 3.3.3. Загрузка данных DESI DR1

```python
class DESIDataLoader:
    """Загрузчик данных DESI DR1."""
    
    DESI_LSS_URL = "https://data.desi.lbl.gov/public/dr1/survey/catalogs/dr1/LSS/iron/LSScats/v1.5"
    
    def load_lss_catalog(self, tracer: str = "LRG", 
                         region: str = "NGC",
                         z_min: float = 0.4, 
                         z_max: float = 1.1) -> pd.DataFrame:
        """
        Загрузка LSS каталога DESI.
        
        Трейсеры:
        - BGS: Bright Galaxy Survey (z < 0.6)
        - LRG: Luminous Red Galaxies (0.4 < z < 1.1)
        - ELG: Emission Line Galaxies (0.8 < z < 1.6)
        - QSO: Quasars (0.8 < z < 3.5)
        """
        # Проверка кэша
        cache_file = self.cache_dir / f"desi_lss_{tracer}_{region}.parquet"
        if cache_file.exists():
            return pd.read_parquet(cache_file)
        
        # Загрузка и кэширование
        df = self._download_lss_fits(tracer, region)
        df = df[(df["z"] >= z_min) & (df["z"] <= z_max)]
        df.to_parquet(cache_file)
        return df
```

### 3.3.4. Результаты загрузки данных

В рамках эксперимента успешно загружены данные из двух источников:

| Источник | Объектов | Диапазон z | Среднее z | Метод доступа |
|----------|----------|--------------|------------|----------------|
| **DESI DR1** | 5 000 | 0.40 — 1.10 | 0.768 ± 0.200 | SPARCL API |
| **SDSS DR16** | 491 | 0.002 — 0.998 | 0.452 ± 0.272 | VizieR V/154 |
| **Итого** | **5 491** | 0.002 — 1.10 | — | — |

**Характеристики DESI выборки:**
- Тип трейсера: GALAXY (LRG диапазон)
- Покрытие неба: RA 3.47° — 354.70°, Dec -29.26° — 83.92°
- Источник: DESI-DR1 через NOIRLab SPARCL API

## 3.4. Модуль анализа качества данных

### 3.4.1. Анализ проблем в данных

Модуль `api/data_cleaning.py` предоставляет эндпоинт для автоматического анализа качества:

```python
@router.post("/api/cleaning/analyze-issues")
async def analyze_dataset_issues(dataset_id: str, sample_size: int = 10000):
    """Анализ датасета на предмет проблем качества."""
    
    issues = []
    recommendations = []
    
    # 1. Анализ пропущенных значений
    missing_analysis = analyze_missing_values(df)
    if missing_analysis["total_missing"] > 0:
        issues.append(missing_analysis)
    
    # 2. Анализ дубликатов
    duplicate_analysis = analyze_duplicates(df)
    if duplicate_analysis["duplicate_count"] > 0:
        issues.append(duplicate_analysis)
    
    # 3. Анализ выбросов (IQR-метод)
    outlier_analysis = analyze_outliers(df)
    if outlier_analysis["outlier_count"] > 0:
        issues.append(outlier_analysis)
    
    # 4. Анализ типов данных
    dtype_analysis = analyze_data_types(df)
    
    # 5. Анализ диапазонов значений
    range_analysis = analyze_value_ranges(df)
    
    return {"issues": issues, "recommendations": recommendations, "health_score": health_score}
```

### 3.4.2. Расчёт Health Score

Health Score вычисляется как взвешенная сумма метрик качества:

$$\text{HealthScore} = 100 - (w_m \cdot M + w_d \cdot D + w_o \cdot O + w_t \cdot T)$$

где:
- $M$ — процент пропущенных значений;
- $D$ — процент дубликатов;
- $O$ — процент выбросов;
- $T$ — процент некорректных типов;
- $w_m, w_d, w_o, w_t$ — весовые коэффициенты.

### 3.4.3. Результаты валидации данных SDSS

| Проверка | Результат |
|----------|-----------|
| Координаты (0° ≤ RA < 360°, -90° ≤ Dec ≤ 90°) | ✓ Пройдена |
| Красное смещение (0 < z < 7) | ✓ Пройдена |
| Уникальность записей (objID) | 100% |
| Пропущенные значения | 0% |
| Health Score | 100.0 |

## 3.5. Модуль очистки данных

### 3.5.1. Пайплайн очистки

Модуль поддерживает следующие операции очистки:

```python
class CleaningOperation(str, Enum):
    REMOVE_DUPLICATES = "remove_duplicates"
    HANDLE_MISSING = "handle_missing"
    NORMALIZE_VALUES = "normalize_values"
    REMOVE_OUTLIERS = "remove_outliers"
    STANDARDIZE_FORMATS = "standardize_formats"
    VALIDATE_RANGES = "validate_ranges"

class MissingValueStrategy(str, Enum):
    DROP = "drop"
    FILL_MEAN = "fill_mean"
    FILL_MEDIAN = "fill_median"
    FILL_MODE = "fill_mode"
    FILL_ZERO = "fill_zero"
    INTERPOLATE = "interpolate"
```

### 3.5.2. Пример применения очистки

```python
@router.post("/api/cleaning/apply")
async def apply_cleaning_operations(
    dataset_id: str,
    operations: List[CleaningOperation],
    missing_strategy: MissingValueStrategy = MissingValueStrategy.DROP
):
    """Применение операций очистки к датасету."""
    
    changes_log = []
    original_size = len(df)
    
    for op in operations:
        if op == CleaningOperation.REMOVE_DUPLICATES:
            before = len(df)
            df = df.drop_duplicates()
            changes_log.append(f"Удалено дубликатов: {before - len(df)}")
        
        elif op == CleaningOperation.HANDLE_MISSING:
            if missing_strategy == MissingValueStrategy.DROP:
                df = df.dropna()
            elif missing_strategy == MissingValueStrategy.FILL_MEAN:
                df = df.fillna(df.mean(numeric_only=True))
    
    return {
        "original_size": original_size,
        "cleaned_size": len(df),
        "removed": original_size - len(df),
        "changes_log": changes_log
    }
```

### 3.5.3. Результаты очистки данных SDSS

| Этап | До | После | Удалено |
|------|----|----|---------|
| Загружено объектов | 55 000 | 55 000 | — |
| Унификация колонок | 55 000 | 55 000 | — |
| Удаление дубликатов | 55 000 | 55 000 | 0 |
| Фильтрация по z (0.001 < z < 1.0) | 55 000 | 491 | 54 509 |
| **Итого с redshift** | — | **491** | — |

## 3.6. Хранилище данных и артефактов

### 3.6.1. Структура хранения

```
data/
├── raw/                    # Сырые данные
│   ├── sdss/
│   │   └── sdss_spectro_validated.parquet
│   └── desi/              # Кэш DESI
│
outputs/
├── pipeline/              # Артефакты пайплайна
│   ├── graphs.pkl         # Сериализованные графы
│   ├── graph_features.csv # Признаки графов
│   ├── data_validation.json
│   └── pipeline_artifacts.pkl  # ML-модели
│
reports/
├── figures/               # Визуализации
│   └── sdss_real_data.png
└── tables/                # Таблицы результатов
```

### 3.6.2. Форматы хранения

| Тип данных | Формат | Обоснование |
|------------|--------|-------------|
| Табличные данные | Parquet | Колоночное сжатие, типизация |
| Графы NetworkX | Pickle | Сериализация Python-объектов |
| Признаки | CSV | Переносимость, читаемость |
| ML-модели | Pickle (joblib) | Стандарт scikit-learn |
| Метаданные | JSON | Структурированность |

## 3.7. Пользовательский интерфейс (Dashboard)

### 3.7.1. Обзор интерфейса

Веб-интерфейс реализован на HTML5 + Tailwind CSS + JavaScript и включает:

1. **Панель статуса** — состояние системы и подключений;
2. **Импорт данных** — выбор источника и параметров загрузки;
3. **Анализ качества** — визуализация проблем в данных;
4. **Очистка** — применение операций с предпросмотром;
5. **Результаты** — таблицы и графики экспериментов.

### 3.7.2. Пример взаимодействия с API

```javascript
// dashboard.js — загрузка статуса системы
async function loadSystemStatus() {
    try {
        const response = await fetch('/api');
        const data = await response.json();
        
        document.getElementById('api-version').textContent = data.version;
        document.getElementById('python-version').textContent = data.python_version;
        document.getElementById('environment').textContent = data.environment;
        
        updateDependencyStatus(data.dependencies);
    } catch (error) {
        console.error('Failed to load system status:', error);
    }
}

// Запрос анализа качества данных
async function analyzeDataset(datasetId) {
    const response = await fetch(`/api/cleaning/analyze-issues?dataset_id=${datasetId}`, {
        method: 'POST'
    });
    const result = await response.json();
    displayIssues(result.issues);
    updateHealthScore(result.health_score);
}
```

### 3.7.3. Сценарий работы пользователя

1. Пользователь открывает Dashboard (`/`);
2. Выбирает источник данных (SDSS / DESI);
3. Задаёт параметры загрузки (регион неба, диапазон z);
4. Система загружает и валидирует данные;
5. Отображается отчёт о качестве (Health Score);
6. Пользователь применяет операции очистки;
7. Запускается построение графов и извлечение признаков;
8. Результаты классификации отображаются в виде таблиц.

## 3.8. DevOps и развёртывание

### 3.8.1. Docker-образ

Dockerfile использует multi-stage build для оптимизации размера:

```dockerfile
# Этап сборки
FROM python:3.11-slim as builder
RUN apt-get update && apt-get install -y gcc g++ gfortran libopenblas-dev
COPY requirements.txt .
RUN pip install --no-cache-dir -r requirements.txt

# Продакшен-образ
FROM python:3.11-slim
COPY --from=builder /usr/local/lib/python3.11/site-packages /usr/local/lib/python3.11/site-packages
COPY . /app
WORKDIR /app

ENV PYTHONPATH=/app
ENV ENVIRONMENT=production
EXPOSE 8000

HEALTHCHECK --interval=30s --timeout=30s --start-period=15s --retries=3 \
    CMD curl -f http://localhost:8000/ping || exit 1

CMD ["python", "-m", "uvicorn", "api.index:app", "--host", "0.0.0.0", "--port", "8000"]
```

### 3.8.2. Docker Compose для локального развёртывания

```yaml
version: '3.8'

services:
  mongodb:
    image: mongo:7.0
    ports:
      - "27017:27017"
    environment:
      MONGO_INITDB_ROOT_USERNAME: admin
      MONGO_INITDB_ROOT_PASSWORD: password
    volumes:
      - mongodb_data:/data/db

  redis:
    image: redis:7-alpine
    ports:
      - "6379:6379"

  api:
    build: .
    ports:
      - "8000:8000"
    environment:
      MONGO_URI: mongodb://admin:password@mongodb:27017
      REDIS_URL: redis://redis:6379/0
    depends_on:
      - mongodb
      - redis

volumes:
  mongodb_data:
```

### 3.8.3. Схема развёртывания

```
┌─────────────────────────────────────────────────────────┐
│                    Azure Cloud                          │
│  ┌─────────────────┐  ┌─────────────────┐              │
│  │ Azure Container │  │ Azure Cosmos DB │              │
│  │   Instances     │  │    (MongoDB)    │              │
│  │                 │  │                 │              │
│  │  scientific-api │◄─┤  Astronomical   │              │
│  │  Docker Image   │  │     Data        │              │
│  └────────┬────────┘  └─────────────────┘              │
│           │                                             │
│           ▼                                             │
│  ┌─────────────────┐                                   │
│  │  Azure Redis    │                                   │
│  │    Cache        │                                   │
│  └─────────────────┘                                   │
└─────────────────────────────────────────────────────────┘
              ▲
              │ HTTPS
              ▼
┌─────────────────────────────────────────────────────────┐
│                   Пользователи                          │
│  ┌──────────┐  ┌──────────┐  ┌──────────────────┐      │
│  │Dashboard │  │ Jupyter  │  │ Программный      │      │
│  │   UI     │  │ Notebook │  │ доступ (API)     │      │
│  └──────────┘  └──────────┘  └──────────────────┘      │
└─────────────────────────────────────────────────────────┘
```

## 3.9. Экспериментальное исследование

### 3.9.1. Постановка эксперимента

**Цель эксперимента**: Проверить гипотезу о возможности различения космологических и квантовых графов на основе топологических и спектральных признаков методами машинного обучения.

**Данные**:
- Космологические графы: построены из **реальных данных DESI DR1 и SDSS DR16**;
- Квантовые графы: сгенерированы на основе моделей 2D гармонического осциллятора и потенциальной ямы.

**Пайплайн эксперимента**:
```
Загрузка DESI (SPARCL) + SDSS (VizieR) → Валидация → 
→ Построение k-NN графов → Генерация квантовых графов → 
→ Извлечение признаков → Обучение классификаторов → Оценка
```

### 3.9.2. Характеристики исходных данных

**Космологические данные**:

| Параметр | DESI DR1 | SDSS DR16 |
|----------|----------|------------|
| Источник | SPARCL API (NOIRLab) | VizieR V/154 |
| Загружено объектов | 5 000 | 491 |
| Диапазон RA | 3.47° — 354.70° | 139.63° — 230.48° |
| Диапазон Dec | -29.26° — 83.92° | 19.53° — 50.05° |
| Диапазон z | 0.40 — 1.10 | 0.002 — 0.998 |
| Среднее z | 0.768 ± 0.200 | 0.452 ± 0.272 |
| Тип объектов | GALAXY (LRG) | GALAXY |

**Квантовые модели**:

| № | Модель | Параметры |
|---|--------|-----------|
| 1–4 | 2D гармонический осциллятор | ω = 0.5, 1.0, 1.5, 2.0 |
| 5–7 | 2D потенциальная яма | V₀ = 5, 10, 15; w = 2, 2.5, 3 |

### 3.9.3. Построенные графы

| Тип | Источник | Узлов | Рёбер | Метод |
|-----|----------|-------|-------|-------|
| Космологический | **DESI DR1** | 500 | 3693 | k-NN (k=15) |
| Космологический | **SDSS DR16** | 491 | 3634 | k-NN (k=15) |
| Квантовый | Гарм. осц. (ω=0.5–2.0) | 1600 | 3120 | 4-связная решётка |
| Квантовый | Потенц. яма (V₀=5–15) | 1600 | 3120 | 4-связная решётка |
| **Всего** | — | — | — | **9 графов** |

### 3.9.4. Извлечённые признаки

Для каждого графа извлечено 15 признаков:

| Признак | Описание |
|---------|----------|
| n_nodes | Число вершин |
| n_edges | Число рёбер |
| density | Плотность графа |
| avg_degree | Средняя степень вершины |
| std_degree | СКО степени |
| max_degree | Максимальная степень |
| avg_clustering | Средний коэффициент кластеризации |
| transitivity | Глобальная транзитивность |
| n_components | Число компонент связности |
| spectral_gap | Алгебраическая связность (λ₁) |
| eig_0 ... eig_4 | Первые 5 собственных значений лапласиана |

### 3.9.5. Сравнение признаков по типам систем

| Признак | DESI | SDSS | Квантовые | Различие |
|---------|------|------|-----------|----------|
| n_nodes | 500 | 491 | 1600 | 3.2× |
| n_edges | 3693 | 3634 | 3120 | 1.2× |
| density | 0.0296 | 0.0302 | 0.0024 | **12.5×** |
| avg_degree | 14.77 | 14.80 | 3.90 | **3.8×** |
| avg_clustering | **0.653** | **0.691** | **0.000** | **∞** |
| transitivity | **0.645** | **0.679** | **0.000** | **∞** |

**Ключевое наблюдение**: Оба космологических графа (DESI и SDSS) демонстрируют очень схожие топологические характеристики (clustering ≈ 0.65–0.69, transitivity ≈ 0.65–0.68), несмотря на разные диапазоны красных смещений и области неба. Это подтверждает **универсальность структуры космической паутины** на разных масштабах.

Квантовые решётки имеют нулевую кластеризацию из-за отсутствия треугольников в 4-связной топологии.

### 3.9.6. Результаты классификации

**Используемые модели**:
1. Logistic Regression (L2-регуляризация);
2. Random Forest Classifier (100 деревьев).

**Предобработка**: StandardScaler для нормализации признаков.

**Валидация**: Leave-One-Out (LOO) кросс-валидация из-за малого размера выборки.

**Результаты на 9 графах (2 космологических + 7 квантовых)**:

| Модель | Accuracy | Correct/Total |
|--------|----------|---------------|
| Logistic Regression | **100%** | 9/9 |
| Random Forest | **100%** | 9/9 |

### 3.9.7. Важность признаков (Random Forest)

| Признак | Важность |
|---------|----------|
| n_nodes | 18.3% |
| n_edges | 18.3% |
| avg_clustering | 15.9% |
| transitivity | 15.9% |
| density | 12.2% |
| avg_degree | 9.8% |
| max_degree | 9.8% |

**Интерпретация**: Размерные признаки (n_nodes, n_edges) имеют высокую важность из-за различий в масштабах, однако ключевыми дискриминаторами остаются **avg_clustering и transitivity** — оба космологических графа (DESI и SDSS) имеют кластеризацию ~0.65-0.69, тогда как все квантовые графы имеют кластеризацию = 0.000.

### 3.9.8. Визуализация результатов

![Распределение данных SDSS](../reports/figures/sdss_real_data.png)

*Рисунок 3.1. Визуализация загруженных данных SDSS: (a) покрытие неба в координатах RA-Dec; (b) распределение красных смещений; (c) распределение магнитуд; (d) количество объектов по регионам.*

### 3.9.9. Валидация результатов

Для подтверждения воспроизводимости выполнена валидация:

```json
{
  "coordinates_valid": true,
  "redshift_valid": true,
  "uniqueness_ratio": 1.0,
  "data_source": "VizieR V/154 (SDSS DR16) + SPARCL (DESI DR1)",
  "timestamp": "2026-01-08"
}
```

**Тестирование API**: 44 теста успешно пройдено (pytest).

## 3.10. Сравнительный анализ геометрии систем

### 3.10.1. Сравнительная таблица геометрических характеристик

| Метрика | Космологические | Квантовые | Различие |
|---------|-----------------|-----------|----------|
| Узлов (в среднем) | 494 | 1600 | 3.2× меньше |
| Рёбер | 3654 | 3120 | 1.2× больше |
| **Плотность** | 0.030 | 0.002 | **12× больше** |
| Средняя степень | 14.8 | 3.9 | 3.8× больше |
| **Кластеризация** | 0.678 | 0.000 | **∞** |
| **Транзитивность** | 0.668 | 0.000 | **∞** |
| Диаметр | 17 | 78 | 4.7× меньше |
| Средний путь | 6.9 | 32.0 | 4.7× меньше |
| **Спектральная щель** | 7.9 | 0.006 | **1300× больше** |

### 3.10.2. Интерпретация геометрических различий

**1. Кластеризация и транзитивность (∞ различие)**

Космологические графы имеют высокую локальную кластеризацию (~0.67), что отражает иерархическую структуру космической паутины: галактики группируются в скопления, скопления — в суперскопления. Квантовые решётки имеют нулевую кластеризацию из-за отсутствия треугольников в 4-связной топологии.

**2. Феномен "малого мира"**

- Космологические графы: диаметр ~17, средний путь ~7
- Квантовые решётки: диаметр ~78, средний путь ~32

Несмотря на сравнимое количество рёбер, космологические графы демонстрируют свойство "малого мира" (small-world) — любые две галактики соединены коротким путём. Это объясняется наличием дальнодействующих связей между кластерами.

**3. Спектральная щель (1300× различие)**

Спектральная щель λ₂ лапласиана характеризует алгебраическую связность графа:
- Космологические: λ₂ ≈ 7.9 — хорошо связанная структура
- Квантовые: λ₂ ≈ 0.006 — почти вырожденный спектр

Это означает, что процессы диффузии и распространения информации в космологических структурах происходят на ~1000× быстрее.

**4. Распределение степеней**

- Космологические: непрерывное распределение (min=0, max=26, mean=14.8, std=3.5)
- Квантовые: дискретное распределение {2: 4, 3: 152, 4: 1444}

Космологические графы демонстрируют гетерогенную структуру с узлами-хабами, тогда как квантовые решётки строго регулярны.

### 3.10.3. Визуализация результатов

![Сравнение геометрии](../reports/figures/geometry_comparison.png)

*Рисунок 3.2. Сравнительный анализ геометрических характеристик космологических (зелёный) и квантовых (красный) графов.*

![Распределение степеней](../reports/figures/degree_distribution.png)

*Рисунок 3.3. Распределение степеней узлов: широкое непрерывное для космологических vs дискретное для квантовых систем.*

![Структура графов](../reports/figures/graph_structures.png)

*Рисунок 3.4. Визуализация структуры графов: (a) DESI DR1, (b) SDSS DR16, (c) квантовая решётка.*

## 3.11. Выводы по главе

В данной главе представлены результаты экспериментального исследования по классификации космологических и квантовых графов:

### 3.10.1. Реализованные компоненты

1. **Программный комплекс scientific-api**:
   - FastAPI-сервер с модульной архитектурой;
   - Коннекторы к VizieR (SDSS DR16) и SPARCL (DESI DR1);
   - Модули анализа и очистки данных;
   - ML-пайплайн классификации графов;
   - Веб-интерфейс Dashboard.

2. **DevOps-инфраструктура**:
   - Docker-контейнеризация;
   - Docker Compose для локального развёртывания;
   - Поддержка Azure Container Instances.

### 3.11.2. Экспериментальные результаты

1. Загружено и валидировано:
   - **5000 объектов** из DESI DR1 (z = 0.40—1.10);
   - **491 объект** из SDSS DR16 (z = 0.002—0.998);

2. Построено **9 графов** (2 космологических + 7 квантовых);

3. Извлечено **15 топологических и спектральных признаков**;

4. Достигнута **100% точность классификации** (LOO cross-validation, 9/9);

5. Выявлены ключевые геометрические различия:

| Характеристика | Космологические | Квантовые | Различие |
|----------------|-----------------|-----------|----------|
| Кластеризация | 0.678 | 0.000 | ∞ |
| Транзитивность | 0.668 | 0.000 | ∞ |
| Плотность | 0.030 | 0.002 | 12× |
| Средний путь | 6.9 | 32.0 | 4.7× |
| Спектральная щель | 7.9 | 0.006 | 1300× |

### 3.11.3. Соответствие задачам исследования

| Задача из Введения | Статус |
|--------------------|--------|
| Разработать графовый формат представления | ✓ Реализовано |
| Построить набор структурных признаков | ✓ 15 признаков |
| Реализовать программный пайплайн | ✓ scientific-api |
| Провести сравнительный анализ геометрии | ✓ 5 ключевых метрик |
| Классифицировать системы | ✓ 100% accuracy |
| Интерпретировать результаты | ✓ Кластеризация — ключ |

### 3.10.4. Готовность к практическому использованию

Программный комплекс готов к:
- Развёртыванию в production-среде (Docker, Azure);
- Расширению на данные DESI DR1 (18.6 млн спектров);
- Интеграции дополнительных ML-моделей;
- Использованию в исследовательских задачах.

### 3.10.5. Ограничения

1. **Малый размер выборки**: 10 графов недостаточно для статистически значимых выводов о generalization;
2. **Идеальная разделимость**: 100% accuracy указывает на принципиальное различие классов, но не проверяет робастность;
3. **Нет cross-validation**: Требуется расширение выборки для полноценной оценки.

### 3.10.6. Направления развития

1. Расширение выборки за счёт DESI DR1 (миллионы галактик);
2. Добавление промежуточных классов (филаменты, войды);
3. Применение GNN (Graph Neural Networks) для end-to-end классификации;
4. Исследование устойчивости к шуму и неполноте данных.
